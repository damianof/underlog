(function($,O){typeof exports=="object"&&typeof module<"u"?O(exports):typeof define=="function"&&define.amd?define(["exports"],O):($=typeof globalThis<"u"?globalThis:$||self,O($.underlog={}))})(this,function($){"use strict";var le=Object.defineProperty;var ae=($,O,x)=>O in $?le($,O,{enumerable:!0,configurable:!0,writable:!0,value:x}):$[O]=x;var T=($,O,x)=>(ae($,typeof O!="symbol"?O+"":O,x),x);var O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x={exports:{}};(function(_,r){(function(s,u){_.exports=u()})(O,function(){var s=1e3,u=6e4,m=36e5,g="millisecond",f="second",y="minute",D="hour",S="day",j="week",w="month",R="quarter",H="year",P="date",q="Invalid Date",se=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ie={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},U=function(a,n,e){var i=String(a);return!i||i.length>=n?a:""+Array(n+1-i.length).join(e)+a},oe={s:U,z:function(a){var n=-a.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+U(i,2,"0")+":"+U(t,2,"0")},m:function a(n,e){if(n.date()<e.date())return-a(e,n);var i=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(i,w),l=e-t<0,o=n.clone().add(i+(l?-1:1),w);return+(-(i+(e-t)/(l?t-o:o-t))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:w,y:H,w:j,d:S,D:P,h:D,m:y,s:f,ms:g,Q:R}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},W="en",z={};z[W]=ie;var F=function(a){return a instanceof N},J=function a(n,e,i){var t;if(!n)return W;if(typeof n=="string"){var l=n.toLowerCase();z[l]&&(t=l),e&&(z[l]=e,t=l);var o=n.split("-");if(!t&&o.length>1)return a(o[0])}else{var c=n.name;z[c]=n,t=c}return!i&&t&&(W=t),t||!i&&W},p=function(a,n){if(F(a))return a.clone();var e=typeof n=="object"?n:{};return e.date=a,e.args=arguments,new N(e)},h=oe;h.l=J,h.i=F,h.w=function(a,n){return p(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var N=function(){function a(e){this.$L=J(e.locale,null,!0),this.parse(e)}var n=a.prototype;return n.parse=function(e){this.$d=function(i){var t=i.date,l=i.utc;if(t===null)return new Date(NaN);if(h.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(se);if(o){var c=o[2]-1||0,v=(o[7]||"0").substring(0,3);return l?new Date(Date.UTC(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,v)):new Date(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,v)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return h},n.isValid=function(){return this.$d.toString()!==q},n.isSame=function(e,i){var t=p(e);return this.startOf(i)<=t&&t<=this.endOf(i)},n.isAfter=function(e,i){return p(e)<this.startOf(i)},n.isBefore=function(e,i){return this.endOf(i)<p(e)},n.$g=function(e,i,t){return h.u(e)?this[i]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,i){var t=this,l=!!h.u(i)||i,o=h.p(e),c=function(Y,b){var A=h.w(t.$u?Date.UTC(t.$y,b,Y):new Date(t.$y,b,Y),t);return l?A:A.endOf(S)},v=function(Y,b){return h.w(t.toDate()[Y].apply(t.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(b)),t)},d=this.$W,M=this.$M,k=this.$D,L="set"+(this.$u?"UTC":"");switch(o){case H:return l?c(1,0):c(31,11);case w:return l?c(1,M):c(0,M+1);case j:var E=this.$locale().weekStart||0,I=(d<E?d+7:d)-E;return c(l?k-I:k+(6-I),M);case S:case P:return v(L+"Hours",0);case D:return v(L+"Minutes",1);case y:return v(L+"Seconds",2);case f:return v(L+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,i){var t,l=h.p(e),o="set"+(this.$u?"UTC":""),c=(t={},t[S]=o+"Date",t[P]=o+"Date",t[w]=o+"Month",t[H]=o+"FullYear",t[D]=o+"Hours",t[y]=o+"Minutes",t[f]=o+"Seconds",t[g]=o+"Milliseconds",t)[l],v=l===S?this.$D+(i-this.$W):i;if(l===w||l===H){var d=this.clone().set(P,1);d.$d[c](v),d.init(),this.$d=d.set(P,Math.min(this.$D,d.daysInMonth())).$d}else c&&this.$d[c](v);return this.init(),this},n.set=function(e,i){return this.clone().$set(e,i)},n.get=function(e){return this[h.p(e)]()},n.add=function(e,i){var t,l=this;e=Number(e);var o=h.p(i),c=function(M){var k=p(l);return h.w(k.date(k.date()+Math.round(M*e)),l)};if(o===w)return this.set(w,this.$M+e);if(o===H)return this.set(H,this.$y+e);if(o===S)return c(1);if(o===j)return c(7);var v=(t={},t[y]=u,t[D]=m,t[f]=s,t)[o]||1,d=this.$d.getTime()+e*v;return h.w(d,this)},n.subtract=function(e,i){return this.add(-1*e,i)},n.format=function(e){var i=this,t=this.$locale();if(!this.isValid())return t.invalidDate||q;var l=e||"YYYY-MM-DDTHH:mm:ssZ",o=h.z(this),c=this.$H,v=this.$m,d=this.$M,M=t.weekdays,k=t.months,L=function(b,A,G,B){return b&&(b[A]||b(i,l))||G[A].slice(0,B)},E=function(b){return h.s(c%12||12,b,"0")},I=t.meridiem||function(b,A,G){var B=b<12?"AM":"PM";return G?B.toLowerCase():B},Y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:d+1,MM:h.s(d+1,2,"0"),MMM:L(t.monthsShort,d,k,3),MMMM:L(k,d),D:this.$D,DD:h.s(this.$D,2,"0"),d:String(this.$W),dd:L(t.weekdaysMin,this.$W,M,2),ddd:L(t.weekdaysShort,this.$W,M,3),dddd:M[this.$W],H:String(c),HH:h.s(c,2,"0"),h:E(1),hh:E(2),a:I(c,v,!0),A:I(c,v,!1),m:String(v),mm:h.s(v,2,"0"),s:String(this.$s),ss:h.s(this.$s,2,"0"),SSS:h.s(this.$ms,3,"0"),Z:o};return l.replace(re,function(b,A){return A||Y[b]||o.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,i,t){var l,o=h.p(i),c=p(e),v=(c.utcOffset()-this.utcOffset())*u,d=this-c,M=h.m(this,c);return M=(l={},l[H]=M/12,l[w]=M,l[R]=M/3,l[j]=(d-v)/6048e5,l[S]=(d-v)/864e5,l[D]=d/m,l[y]=d/u,l[f]=d/s,l)[o]||d,t?M:h.a(M)},n.daysInMonth=function(){return this.endOf(w).$D},n.$locale=function(){return z[this.$L]},n.locale=function(e,i){if(!e)return this.$L;var t=this.clone(),l=J(e,i,!0);return l&&(t.$L=l),t},n.clone=function(){return h.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a}(),Q=N.prototype;return p.prototype=Q,[["$ms",g],["$s",f],["$m",y],["$H",D],["$W",S],["$M",w],["$y",H],["$D",P]].forEach(function(a){Q[a[1]]=function(n){return this.$g(n,a[0],a[1])}}),p.extend=function(a,n){return a.$i||(a(n,N,p),a.$i=!0),p},p.locale=J,p.isDayjs=F,p.unix=function(a){return p(1e3*a)},p.en=z[W],p.Ls=z,p.p={},p})})(x);const K=x.exports;class Z{getTimestamp(){return K().format()}}class C{constructor(r){T(this,"level");T(this,"levelOnly");this.level=Object.freeze(r.level),this.levelOnly=Object.freeze(r.levelOnly)}tryGetData(r){let s={dataAsString:"",dataRaw:[],hasData:!1};const u=r.args||[];if(s.hasData=u.length>0,u.length>0){s.dataRaw=u;try{return Array.isArray(u)?s.dataAsString=u.join(", "):s.dataAsString=JSON.stringify(u),s}catch{return s.dataAsString=u.join(", "),s}}return s}}class V extends C{constructor(r){super(r)}async write(r){return new Promise(s=>{const{timestamp:u,level:m,args:g}=r,f=`${u} ${m}`;g?console.log(`${f}:`,...g):console.log(f),s(!0)})}}class X extends C{constructor(s){super(s);T(this,"prefix",Object.freeze("%c "));T(this,"levelStyles",{log:"background: blue; color: white",highlight:"background: yellow;",debug:"background: blue; color: white",info:"background: green; color: white",warn:"background: orange; color: white",["warn-high"]:"font-size: 20px; background: orange; color: white",error:"background: red; color: white"});s.levelStyles&&(this.levelStyles=Object.freeze(s.levelStyles))}async write(s){return new Promise(u=>{const{timestamp:m,level:g}=s,{dataAsString:f,hasData:y}=this.tryGetData(s);let D=!1;if(navigator&&(D=/chrome/gi.test(navigator.userAgent)),g!=="log"&&D){const S=`${m}${this.prefix+g}`.trim();y?console.log(`${S}:`,this.levelStyles[g],f):console.log(`${S}:`,this.levelStyles[g])}else{const S=`${m} ${g}`.trim();y?console.log(`${S}:`,f):console.log(S)}u(!0)})}}class ee extends C{constructor(s){super(s);T(this,"domElement");T(this,"levelStyles",{log:"color: black",highlight:"background-color: yellow; color: black",debug:"color: blue",info:"color: green",warn:"color: orange",["warn-high"]:"font-size: 20px; background: orange; color: white",error:"color: red"});this.domElement=s.domElement,s.levelStyles&&(this.levelStyles=Object.freeze(s.levelStyles))}async write(s){return new Promise((u,m)=>{if(!this.domElement||this.domElement.innerHTML===void 0)m("HtmlTransport: write: Invalid or undefined dom element");else{const{timestamp:g,level:f}=s,{dataAsString:y,hasData:D}=this.tryGetData(s),S=`<span>${g}</span>`;let j="";f!=="log"?j=`<span style="${this.levelStyles[f]}">${f}</span>`:j=`<span>${f}</span>`;let w=`${S} ${j}`;D?w=`${w}: <span>${y}</span><br/>`:w=`${w}<br/>`,this.domElement.innerHTML+=w,u(!0)}})}}class te extends C{constructor(s){super(s);T(this,"prefix",Object.freeze("\x1B["));T(this,"suffix",Object.freeze("\x1B[0;37m"));T(this,"levelStyles",{log:"0;1;37m",highlight:"7;1;36m",debug:"0;1;34m",info:"0;1;32m",warn:"0;1;33m",["warn-high"]:"0;1;35m",error:"0;1;31m"});s.levelStyles&&(this.levelStyles=Object.freeze(s.levelStyles))}async write(s){return new Promise(u=>{const{timestamp:m,level:g}=s,f=`${m} ${this.prefix}${this.levelStyles[g]}${g}${this.suffix}:`,y=s.args||[];y.length>0?console.log(`${f}:`,...y):console.log(f),u(!0)})}}class ne{constructor(r){T(this,"supportedLevels");T(this,"transports");T(this,"timestampService");if(r){const{levels:s,transports:u,timestampService:m}=r;this.initLevels(s),this.initTransports(u),this.initTimestampService(m)}else this.initLevels(),this.initTransports(),this.initTimestampService()}timestamp(){return this.timestampService?this.timestampService.getTimestamp():new Date().toString()}initLevels(r){const s=["highlight","debug"];(r||[]).length>0?this.supportedLevels=[...s,...r]:this.supportedLevels=s}initTransports(r){(r||[]).length>0?this.transports=r:this.transports=[new V({level:"error",levelOnly:!1})]}initTimestampService(r){r?this.timestampService=r:this.timestampService=new Z}async canProceed(r){return new Promise(s=>{let u=!1;const{transportLevel:m,transportLevelOnly:g,level:f}=r;if(g)u=m===f;else if(m===f||["log","highlight"].indexOf(f)>-1)u=!0;else{const y=this.supportedLevels,D=y.indexOf(m);D>1&&(u=y.slice(0,D).includes(f))}s(u)})}async transportsWrite(r){return new Promise(s=>{this.transports.forEach(async u=>{if(await this.canProceed({transportLevel:u.level,transportLevelOnly:u.levelOnly,level:r.level})){const g=await u.write(r);s(g)}})})}log(...r){let s="log",u=[];(r||[]).length>0&&(s=r.shift(),r.length>0&&(u=r));const m={timestamp:this.timestamp(),level:s,args:u};this.transportsWrite(m).then(()=>{})}highlight(...r){this.log(r)}debug(...r){this.log(r)}info(...r){this.log(r)}warn(...r){this.log(r)}error(...r){this.log(r)}}$.BaseTransport=C,$.ChromeTransport=X,$.DayJsTimestampService=Z,$.DefaultTransport=V,$.HtmlTransport=ee,$.Logger=ne,$.StdErrTransport=te,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
